---
title: "MS_Imp_Guidelines"
output: html_document
date: '2022-07-21'
---

To support the collaborative development of CHEMs that meet TRU assessment criteria, we have created a prototype software framework called ready4. We have designed this framework as a lightweight extension to existing software development infrastructure that could be used to implement CHEMs that are both open-source (for transparency and reusability) and modular (for reusability and updatability).

## 	Framework libraries 
To work within the popular open-source programming environment R [@RCORE2022], the ready4 software framework is implemented as six development version R code libraries. The R libraries collectively provide model developers with tools to combine R's functional and object-oriented programming paradigms [@10.1214/13-STS452] in authoring CHEMs, supplying those CHEMs with data and using CHEMs to implement reproducible modelling analyses. The six novel libraries and the preexisting third-party R libraries they depend on are summarised in Table \@ref(tab:cpkgs).

Standardization and interoperability are core requirements of implementing a modular approach. Model modules need to be able to share inputs and outputs with each other and to be run as independent models [@barros2023empowering]. Each CHEM module authored with the ready4 framework will include both a data structure (specifying the required properties of data that can validly be supplied to a module) and a set of algorithms (specifying the operations that can be performed on data contained in a module instance). The foundational framework library, called ready4, defines a template module data structure (using R’s S4 class system) from which all CHEM module data structures will be created and a novel syntax that enable module algorithms to be consistently named. The ready4 library also contains tools for retrieving web based information on model modules, datasets and analysis programs authored with the framework and for partially automating updates to a project documentation website.

Three R libraries are designed to help standardize workflows for authoring, documenting, testing and disseminating new model modules. The ready4pack library is designed to integrate with GitHub and provides tools for authoring model modules and desseminating them as themed bundles in R libraries libraries that are:

-	documented (with a website, a PDF manual itemising selected contents and a PDF manual itemising all contents);

-	licensed (using the copyleft GNU GPL-3 [66] by default);

-	easily citable (citation information can be retrieved within an R session or from hosting repositories); and

-	quality assured (each update triggers continuous integration workflows, including any acceptance and unit tests created by module library authors).

The ready4pack library depends on two other module authoring libraries. Writing model algorithms as collections of functions (short, self-contained and reusable software routines that each perform a discrete task), has been recommended as good practice for scientific computing [@Wilson_2017].  The ready4fun library contains tools for authoring functions in a consistent house style that automatically generates basic documentation for each function. Functions to implement model algorithms can be associated with a module via a special type of function called a method. Tools from the ready4class library can help streamline and standardise the authoring of module data structures and their associated methods and to automatically generate basic documentation for each module.

The ready4use library contains tools for supplying model modules with data stored in online repositories (hosted on a Dataverse installation or on GitHub), labelling these datasets and then sharing them via online repositories. The ready4show library contains tools to help author R Markdown programs that combine model modules and datasets to undertake analyses. These programs are either self-documenting (code is easy to understand and integrated with plain English explanations of what it does) or trigger the creation of separate documents (e.g. a scientific manuscript).


```{r, child = child_docs_ls$two, echo=FALSE}
```


##	Framework integration with online services 
Our software framework needs to be used in conjunction with a number of online services. To facilitate its application to our youth mental health project, we established and configured accounts with these required services (see Availability of data and materials).

We created a GitHub organisation (a collection of code repositories) where all code (libraries, programs and sub-routines) that we author with the framework is stored and version controlled. We configured individual repositories in our GitHub organisation that are used for code library projects to use GitHub actions to implement continuous integration. By default, code libraries authored with our framework will use continuous integration to assess compliance with policies specified by the Comprehensive R Archive Network (CRAN) [@CRAN2022]. To track our code coverage, we linked our GitHub organisation to an account we established at codecov [@codecov_2022]. To facilitate the creation and hosting of documentation websites, we enabled GitHub Pages in each repository we used for code library development. 
We also created a Zenodo community - a collection of permanent, uniquely identified repositories. We then linked our Zenodo community and GitHub organisation so that every time we specify a version of code in one of our GitHub repositories as a “release”, a copy of that code is automatically created on Zenodo with a DOI. Finally, to manage model datasets, we created a dedicated collection within the Harvard Dataverse installation.

