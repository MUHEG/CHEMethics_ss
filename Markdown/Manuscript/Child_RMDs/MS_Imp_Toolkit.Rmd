---
title: "MS_Imp_Guidelines"
output: html_document
date: '2022-07-21'
---

To support the development of CHEMs that meet TRU assessment criteria, we have created a prototype software framework called ready4 that works within the popular open-source programming language R [@RCORE2022]. The ready4 software framework is implemented as a combination of R code libraries and online services and is supported by a documentation website.
<!-- We have designed this framework to enable ethical computational implementations of health economic models that are both open-source (for transparency and reusability) and modular (for reusability and updatability). The framework aims to support the standardization and interoperability that are core enablers of implementing a modular and open source approaches.  -->
 

### R libraries 
A library in the R language will typically depend on multiple other R libraries, each of which may have different authors. As the number of third-party dependencies of an R library grows so does the fragility of that library (e.g. the library may cease to work as intended due to changes in one of its dependency libraries). To reduce the fragility of our framework we implemented it as multiple R libraries rather than one R library. In total we authored six novel R libraries to implement the ready4 framework, all of which have distinct purposes and dependencies (Table \@ref(tab:cpkgs)).

One framework library provides the **foundation** for implementing CHEMs that are modular and open-source. Modular models are comprised of modules that are able to share inputs and outputs with each other and to be run as independent models [@barros2023empowering]. To be implemented as open-source projects modules authored by different teams must be interoperable. The foundation library facilitates these objectives by defining a template module data structure (using R’s S4 class system) from which all model module data structures will be created and a novel syntax that enable module algorithms to be consistently named. The foundation library also contains tools for retrieving web-based information on model modules, datasets and analysis programs authored with the framework and for partially automating updates to a project documentation website.

Three framework libraries are designed to help standardize workflows for **authoring modules**. The R language supports functional and object-oriented programming paradigms [@10.1214/13-STS452]. Both these paradigms are used in the ready4 framework, each facilitated by a dedicated authoring library. The first module authoring library contains tools for writing functions in a consistent house style and then using the resulting standardised naming conventions to automatically generate basic documentation for each function. The second module authoring library contains tools to help streamline and standardise the authoring of module data structures using the framework's module template and for associating methods (a special type of function) with each module. The second module authoring library also supports the automatic generation of basic documentation for each new module. The third module authoring library provides tools for disseminating themed bundles of model modules as R libraries that are:

-	documented (with a website and PDF manuals);

-	licensed (using the copyleft GNU GPL-3 [66] by default);

-	easily citable (citation information can be retrieved within an R session or from hosting repositories); and

-	quality assured (each update triggers GitHub continuous integration workflows, including any acceptance and unit tests created by module library authors).

<!-- Functions to implement model algorithms can be associated with a module via . -->

<!-- to provide tools for authoring CHEMs, supplying those CHEMs with data and using CHEMs to implement reproducible modelling analyses. -->

<!-- The ready4pack library depends on two other module authoring libraries. <!-- MOVED CONTENT -->

<!-- Each CHEM module authored with the ready4 framework will include both a data structure (specifying the required properties of data that can validly be supplied to a module) and a set of algorithms (specifying the operations that can be performed on data contained in a module instance). -->

<!-- development version -->

A library for **authoring datasets** contains tools for supplying model modules with data stored in online repositories (hosted on a Dataverse installation or on GitHub), labelling these datasets and then sharing them via online repositories. A library for **authoring analyses** contains tools to help author programs that combine model modules and datasets to undertake analyses. These analysis programs authored with this library can be either self-documenting (code is easy to understand and integrated with plain English explanations of what it does) or trigger the creation of separate documents (e.g. a scientific manuscript).

```{r, child = child_docs_ls$three, echo=FALSE}
```

###	Online services 
Our framework libraries are designed to be used in conjunction with a number of online services. 
<!-- To facilitate its application to our youth mental health project, we established and configured accounts with these required services (see Availability of data and materials). -->

We created a GitHub organisation (a collection of code repositories) where all code (libraries, programs and sub-routines) that we author with the framework is stored and version controlled. We configured individual repositories in our GitHub organisation that are used for code library projects to use GitHub actions to implement continuous integration. By default, code libraries authored with our framework will use continuous integration to assess compliance with policies specified by the Comprehensive R Archive Network (CRAN) [@CRAN2022]. To track our code coverage, we linked our GitHub organisation to an account we established at codecov [@codecov_2022]. To facilitate the creation and hosting of documentation websites, we enabled GitHub Pages in each repository we used for code library development. 

We also created a Zenodo community - a collection of permanent, uniquely identified repositories. We then linked our Zenodo community and GitHub organisation so that every time we specify a version of code in one of our GitHub repositories as a “release”, a copy of that code is automatically created on Zenodo with a DOI. Finally, to manage model datasets, we created a dedicated collection within the Harvard Dataverse installation.

###	Documentation website
We developed a framework documentation website (www.ready4-dev.com) that provides guidance to model developers on how to use and contribute improvements to the ready4 software framework and models developed with it. The documentation website is versioned, which means documentation relating to prior versions of framework software can be archived, retrieved and viewed.

The documentation website was developed using the Hugo framework [@hugo_2023], Docsy theme [@docsy_2023] and Algolia DocSearch [@algoliadocsearch_2023] and is hosted using the Netlify [@netlify_2023] service.  We used functions from our foundation framework library to partially automate website updates relating to available CHEM modules, datasets and analysis programs. We linked our Netlify account to our GitHub organisation so that the project website would automatically update whenever the source code in its GitHub repository was edited.
